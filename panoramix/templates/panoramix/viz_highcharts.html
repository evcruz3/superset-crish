{% macro viz_html(viz) %}
<div id="{{ viz.token }}" style="height:100%; width:100%;">
  <img src="{{ url_for("static", filename="loading.gif") }}" class="loading">
</div>
{% endmacro %}

{% macro viz_js(viz) %}
<script>
  $( document ).ready(function() {
    Highcharts.setOptions({
      colors: [
      "#FF5A5F", "#007A87", "#7B0051", "#00D1C1", "#8CE071", "#FFB400",
      "#FFAA91", "#B4A76C", "#9CA299", "#565A5C"
      ],
      global: {
        useUTC: false
      },
    });
    $("#viz_type").click(function(){
      $("#queryform").submit();
    });
    var url = window.location + "&json=true";
    console.log(url);
    $.getJSON(url, function(data){
        console.log(data);
        $("#{{ viz.token }}").highcharts('{{ viz.chart_call }}', data);
    })
    .fail(function(xhr) {
      var err = '<div class="alert alert-danger">' + xhr.responseText  + '</div>';
      $("#{{ viz.token }}").html(err);
    });
  });
</script>
{% endmacro %}

{% macro viz_css(viz) %}
{% endmacro %}
